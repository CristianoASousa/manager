sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("manager.app.controller.Gerenciar",{onInit:function(){this.getRouter().getRoute("Gerenciar").attachPatternMatched(this.handleRouteMatched,this)},handleRouteMatched:async function(){var e=this;await $.ajax({url:"/api/main/Employees?$expand=department",method:"GET",success(r){var a=r.value.length;var o=r.value.reduce((e,t)=>{if(t.department.name in e){e[t.department.name]++}else{e[t.department.name]=1}return e},{});o.total=a;e.getOwnerComponent().setModel(new t(o),"Total")},error(){console.log("erro")}})},onChange:function(e){var t=this;var r=e.getSource().mProperties.value;var a=t.getView().getModel("Total").getProperty("/Recursos Humanos");var o=t.getView().getModel("Total").getProperty("/Financeiro");var n=t.getView().getModel("Total").getProperty("/Projetos");var i=Math.round(a*(r/100));var l=Math.round(o*(r/100));var s=Math.round(n*(r/100));var c=i+l+s;t.getView().getModel("Total").setProperty("/totalPercent",c);t.getView().getModel("Total").setProperty("/rhPercent",i);t.getView().getModel("Total").setProperty("/projectsPercent",s);t.getView().getModel("Total").setProperty("/financialPercent",l)},onNavListar:function(){this.getRouter().navTo("Listar")}})});